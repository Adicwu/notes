## diff

- 最长递增子序列优化（贪心、二分）。优化了乱序比对的性能
- 静态标识。v2 diff时，是遍历所有节点，判断如果为静态节点，则跳过本次比对；v3 在模板编译的时候(所以h、jsx无效)对动态节点进行提前标识，diff时 只遍历动态节点列表（除非全局标识isHmrUpdating当前需要强制全更新）。AST阶段，会将每一个节点区分为静态节点(默认)和动态节点(存在属性、指令等内容；如果是v-for v-if这种，会使用Block，提升为动态节点)，动态节点会被分配一个patchFlag，用于区分比对类别，如文本、样式、属性、全类别等；对于很多的连续静态节点，也会整和成一个静态节点

## 响应式

- proxy代替defineProperty；defineProperty只能对现有对象的指定属性进行浅拦截，也无法拦截数组的push等原型操作；proxy能对整个对象进行浅拦截，其动态添加的属性也可以拦截，对于数组来说，也能直接拦截内部内容改变
- WeakMap\Map\Set 代替了Dep等类，减少了代码量，提升了性能

## 结构

- 项目抽离为monorepo结构，将功能细化并独立，如组合式api


